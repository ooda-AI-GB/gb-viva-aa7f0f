{% extends "layout/base.html" %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h1>Milestones</h1>
</div>

<div class="card">
    {% if milestones %}
    <ul class="timeline" style="margin-top: 20px;">
        {% for m in milestones %}
        <li class="timeline-item">
            <div class="timeline-marker {% if m.completed %}completed{% endif %}"></div>
            <div style="font-weight: 600; {% if m.completed %}text-decoration: line-through; color: var(--text-secondary);{% endif %}">
                {{ m.title }} <span style="font-weight: 400; color: var(--text-secondary);">in {{ m.project.name }}</span>
            </div>
            <div style="font-size: 0.8rem; color: var(--text-secondary);">
                Due {{ m.due_date }} â€¢ {{ m.description if m.description else '' }}
                {% if not m.completed %}
                <form action="/milestones/{{ m.id }}/complete" method="POST" style="display: inline;">
                    <button type="submit" style="background: none; border: none; color: var(--primary); cursor: pointer; font-size: 0.8rem; padding: 0; margin-left: 10px;">(Mark Done)</button>
                </form>
                {% endif %}
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No milestones found across your projects.</p>
    {% endif %}
</div>
{% endblock %}
