<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Tracker</title>
    <style>
        :root {
            --primary: #6366f1;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --bg-dark: #1e1b4b;
            --bg-light: #f8fafc;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg-light); color: var(--text-primary); display: flex; min-height: 100vh; }
        
        .sidebar { width: 250px; background-color: var(--bg-dark); color: white; padding: 20px; display: flex; flex-direction: column; flex-shrink: 0; }
        .logo { font-size: 1.5rem; font-weight: bold; margin-bottom: 30px; color: white; text-decoration: none; }
        .nav-links { display: flex; flex-direction: column; gap: 10px; flex: 1; }
        .nav-link { color: #cbd5e1; text-decoration: none; padding: 10px; border-radius: 6px; transition: background 0.2s; display: block; }
        .nav-link:hover, .nav-link.active { background-color: rgba(255,255,255,0.1); color: white; }
        .user-section { margin-top: auto; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); }
        .user-email { font-size: 0.875rem; color: #94a3b8; margin-bottom: 10px; word-break: break-all; }
        .logout-link { color: #f87171; text-decoration: none; font-size: 0.875rem; }
        
        .main-content { flex: 1; padding: 40px; overflow-y: auto; }
        
        h1 { font-size: 1.875rem; margin-bottom: 20px; font-weight: 700; }
        h2 { font-size: 1.5rem; margin-bottom: 15px; font-weight: 600; }
        h3 { font-size: 1.25rem; margin-bottom: 10px; font-weight: 600; }
        
        .card { background: var(--bg-card); border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid var(--border); margin-bottom: 20px; }
        
        .btn { display: inline-flex; align-items: center; justify-content: center; padding: 8px 16px; border-radius: 6px; font-weight: 500; cursor: pointer; border: none; text-decoration: none; font-size: 0.875rem; transition: background 0.2s; }
        .btn-primary { background-color: var(--primary); color: white; }
        .btn-primary:hover { background-color: #4f46e5; }
        .btn-secondary { background-color: white; border: 1px solid var(--border); color: var(--text-primary); }
        .btn-secondary:hover { background-color: var(--bg-light); }
        .btn-danger { background-color: var(--danger); color: white; }
        
        .badge { display: inline-flex; padding: 2px 8px; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; text-transform: capitalize; }
        .badge-planning, .badge-review { background-color: #dbeafe; color: #1e40af; } /* Blue */
        .badge-active, .badge-done, .badge-completed { background-color: #dcfce7; color: #166534; } /* Green */
        .badge-on_hold, .badge-in_progress, .badge-warning { background-color: #fef3c7; color: #92400e; } /* Amber */
        .badge-critical, .badge-blocked, .badge-danger { background-color: #fee2e2; color: #991b1b; } /* Red */
        .badge-medium, .badge-todo { background-color: #f1f5f9; color: #475569; } /* Gray */
        .badge-low { background-color: #f8fafc; color: #64748b; border: 1px solid #e2e8f0; }

        .progress-bar { width: 100%; height: 8px; background-color: #e2e8f0; border-radius: 4px; overflow: hidden; margin-top: 8px; }
        .progress-value { height: 100%; background-color: var(--success); transition: width 0.3s; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.875rem; }
        .form-control { width: 100%; padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; font-size: 1rem; }
        .form-control:focus { outline: 2px solid var(--primary); border-color: transparent; }
        
        /* Kanban */
        .kanban-board { display: flex; gap: 20px; overflow-x: auto; padding-bottom: 20px; align-items: flex-start; }
        .kanban-col { min-width: 280px; max-width: 280px; background: #f1f5f9; border-radius: 8px; padding: 12px; }
        .kanban-header { font-weight: 600; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
        .kanban-card { background: white; padding: 12px; border-radius: 6px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); margin-bottom: 10px; cursor: pointer; border-left: 4px solid transparent; }
        .kanban-card.priority-critical { border-left-color: var(--danger); }
        .kanban-card.priority-high { border-left-color: var(--warning); }
        .kanban-card.priority-medium { border-left-color: var(--info); }
        .kanban-card.priority-low { border-left-color: #94a3b8; }
        
        .pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        
        /* Stats */
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .stat-value { font-size: 2rem; font-weight: 700; color: var(--text-primary); }
        .stat-label { color: var(--text-secondary); font-size: 0.875rem; }

        /* Tables */
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 12px; border-bottom: 1px solid var(--border); color: var(--text-secondary); font-weight: 600; font-size: 0.875rem; }
        td { padding: 12px; border-bottom: 1px solid var(--border); }
        tr:last-child td { border-bottom: none; }
        
        .timeline { position: relative; padding-left: 20px; border-left: 2px solid var(--border); margin-left: 10px; }
        .timeline-item { margin-bottom: 20px; position: relative; }
        .timeline-marker { position: absolute; left: -27px; top: 0; width: 12px; height: 12px; border-radius: 50%; background: white; border: 2px solid var(--primary); }
        .timeline-marker.completed { background: var(--success); border-color: var(--success); }
    </style>
</head>
<body>
    <div class="sidebar">
        <a href="/" class="logo">Project Tracker</a>
        <div class="nav-links">
            <a href="/" class="nav-link {% if request.url.path == '/' %}active{% endif %}">Dashboard</a>
            <a href="/projects" class="nav-link {% if request.url.path.startswith('/projects') %}active{% endif %}">Projects</a>
            <a href="/tasks" class="nav-link {% if request.url.path.startswith('/tasks') %}active{% endif %}">Tasks</a>
            <a href="/milestones" class="nav-link {% if request.url.path.startswith('/milestones') %}active{% endif %}">Milestones</a>
            <a href="/insights" class="nav-link {% if request.url.path.startswith('/insights') %}active{% endif %}">Insights</a>
            <a href="/pricing" class="nav-link {% if request.url.path.startswith('/pricing') %}active{% endif %}">Billing</a>
        </div>
        
        {% if user %}
        <div class="user-section">
            <div class="user-email">{{ user.email if user.email else 'User' }}</div>
            <a href="/auth/logout" class="logout-link">Log out</a>
        </div>
        {% else %}
        <div class="user-section">
            <a href="/auth/login" class="nav-link">Log in</a>
        </div>
        {% endif %}
    </div>
    
    <div class="main-content">
        {% block content %}{% endblock %}
    </div>
</body>
</html>
